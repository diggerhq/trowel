{
  "target": "diggerhq/tf-module-bundler@master",
  "for_local_run": true,
  "aws_region": "us-east-1",
  "id": "test-env-id",
  "blocks": [
    {
      "name": "hubii",
      "target": "diggerhq/target-network-module@main",
      "type": "vpc",
      "network_name": "env-test-1",
      "enable_vpc_endpoints": false,
      "enable_dns_hostnames": false,
      "enable_dns_support": true,
      "one_nat_gateway_per_az": true,
      "enable_nat_gateway": false
    },
    {
      "name": "core-service-app",
      "target": "diggerhq/target-ecs-module@dev-hubii",
      "type": "container",
      "health_check": "/",
      "load_balancer": true,
      "internal": "false",
      "container_port": 8080,
      "health_check_matcher": "200-499",
      "launch_type": "FARGATE",
      "aws_app_identifier": "core-service",
      "monitoring_enabled": true,
      "lb_monitoring_enabled": true,
      "environment_variables": [
        {
          "key": "DB_HOST",
          "value": "hubii-db.ctx0gix1bhgt.us-east-1.rds.amazonaws.com"
        },
        {
          "key": "DB_DATABASE",
          "value": "hubii"
        },
        {
          "key": "DB_USERNAME",
          "value": "hubii"
        },
               {
          "key": "APP_DEBUG",
          "value": "true"
        },
        {
          "key": "DB_CONNECTION",
          "value": "pgsql"
        },
        {
          "key": "DB_SCHEMA",
          "value": "hubii_staging"
        }
      ],
      "secrets": {
        "DB_PASSWORD": "arn:aws:ssm:us-east-1:209539466991:parameter/test-env-id/db_password",
        "JWT_SECRET": "arn:aws:ssm:us-east-1:209539466991:parameter/test-env-id/core-service/jwt_secret"
      },
      "secrets_mapping": [
        "DATABASE_URL:database_url_ssm_arn"
      ],
      "env_mapping": [
        "NEXT_PUBLIC_URL:tf_output.hub-next-app.lb_dns"
      ]
    },
    {
      "name": "godmode-react-app",
      "target": "diggerhq/target-ecs-module@dev-hubii",
      "type": "container",
      "task_cpu": 2048,
      "task_memory": 4096,
      "health_check": "/",
      "load_balancer": true,
      "internal": "false",
      "container_port": 3000,
      "health_check_matcher": "200-499",
      "launch_type": "FARGATE",
      "aws_app_identifier": "godmode-react",
      "monitoring_enabled": true,
      "lb_monitoring_enabled": true,
      "environment_variables": [
        {
          "key": "NEXT_PUBLIC_CORE_SERVICE",
          "value": "http://core-service-1035014459.us-east-1.elb.amazonaws.com"
        },
        {
          "key": "NEXT_PUBLIC_CORE_SERVICE_TOKEN",
          "value": "token"
        },
        {
          "key": "NEXT_PUBLIC_CUSTOMER_SERVICE",
          "value": "http://customer-service-179273392.us-east-1.elb.amazonaws.com"
        },
        {
          "key": "NEXT_PUBLIC_CUSTOMER_SERVICE_TOKEN",
          "value": "token"
        },
        {
          "key": "NEXT_PUBLIC_ORDER_SERVICE",
          "value": "http://order-service-302692539.us-east-1.elb.amazonaws.com"
        },
        {
          "key": "NEXT_PUBLIC_ORDER_SERVICE_TOKEN",
          "value": "token"
        },
        {
          "key": "NEXT_PUBLIC_PRODUCT_SERVICE",
          "value": "product-service-2099198766.us-east-1.elb.amazonaws.com"
        },
        {
          "key": "NEXT_PUBLIC_PRODUCT_SERVICE_TOKEN",
          "value": "token"
        },
        {
          "key": "NEXT_PUBLIC_SUPPLIER_SERVICE",
          "value": "supplier-service-1585222236.us-east-1.elb.amazonaws.com"
        },
        {
          "key": "NEXT_PUBLIC_SUPPLIER_SERVICE_TOKEN",
          "value": "token"
        }
      ],
      "secrets": {}
    },
    {
      "name": "store-react-app",
      "target": "diggerhq/target-ecs-module@dev-hubii",
      "type": "container",
      "health_check": "/",
      "load_balancer": true,
      "internal": "false",
      "container_port": 3000,
      "health_check_matcher": "200-499",
      "launch_type": "FARGATE",
      "aws_app_identifier": "store-react",
      "monitoring_enabled": true,
      "lb_monitoring_enabled": true,
      "task_cpu": 2048,
      "task_memory": 4096,
      "environment_variables": [
        {
          "key": "NEXT_PUBLIC_STORE_ROUTER",
          "value": "http://store-router-478266153.us-east-1.elb.amazonaws.com"
        }
      ],
      "secrets": {}
    },
    {
      "name": "hub-next-app",
      "target": "diggerhq/target-ecs-module@dev-hubii",
      "type": "container",
      "health_check": "/",
      "load_balancer": true,
      "internal": "false",
      "container_port": 3000,
      "health_check_matcher": "200-499",
      "launch_type": "FARGATE",
      "aws_app_identifier": "hub-next",
      "monitoring_enabled": true,
      "lb_monitoring_enabled": true,
      "task_cpu": 1024,
      "task_memory": 2048,
      "environment_variables": [
        {
          "key": "REACT_APP_HUB_SERVICE",
          "value": "http://hub-service-1650252928.us-east-1.elb.amazonaws.com"
        }
      ],
      "secrets": {}
    },
    {
      "name": "order-service-app",
      "target": "diggerhq/target-ecs-module@dev-hubii",
      "type": "container",
      "health_check": "/",
      "load_balancer": true,
      "internal": "false",
      "container_port": 8080,
      "health_check_matcher": "200-499",
      "launch_type": "FARGATE",
      "aws_app_identifier": "order-service",
      "monitoring_enabled": true,
      "lb_monitoring_enabled": true,
      "environment_variables": [
        {
          "key": "DB_HOST",
          "value": "hubii-db.ctx0gix1bhgt.us-east-1.rds.amazonaws.com"
        },
        {
          "key": "DB_DATABASE",
          "value": "hubii"
        },
        {
          "key": "DB_USERNAME",
          "value": "hubii"
        },
        {
          "key": "APP_DEBUG",
          "value": "true"
        },
        {
          "key": "DB_CONNECTION",
          "value": "pgsql"
        },
        {
          "key": "DB_SCHEMA",
          "value": "hubii_staging"
        }
      ],
      "secrets": {
        "DB_PASSWORD": "arn:aws:ssm:us-east-1:209539466991:parameter/test-env-id/db_password",
        "JWT_SECRET": "arn:aws:ssm:us-east-1:209539466991:parameter/test-env-id/order-service/jwt_secret"
      }
    },
    {
      "name": "hub-service-app",
      "target": "diggerhq/target-ecs-module@dev-hubii",
      "type": "container",
      "health_check": "/",
      "load_balancer": true,
      "internal": "false",
      "container_port": 8080,
      "health_check_matcher": "200-499",
      "launch_type": "FARGATE",
      "aws_app_identifier": "hub-service",
      "monitoring_enabled": true,
      "lb_monitoring_enabled": true,
      "environment_variables": [
        {
          "key": "DB_HOST",
          "value": "hubii-db.ctx0gix1bhgt.us-east-1.rds.amazonaws.com"
        },
        {
          "key": "ORDER_SERVICE_ENDPOINT",
          "value": "http://order-service-606590112.us-east-1.elb.amazonaws.com"
        },
        {
          "key": "ORDER_SERVICE_TOKEN",
          "value": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJvcmRlciIsInN1YiI6ImN1c3RvbWVyIiwidHlwZSI6InNlcnZpY2UiLCJpYXQiOjE1OTI1MTA3NDd9.Ktt3K-zSWyd6lnBLJrklMGmHtINtt2sSunP73FghBt8"
        },
        {
          "key": "PRODUCT_SERVICE_ENDPOINT",
          "value": "http://product-service-2098129721.us-east-1.elb.amazonaws.com"
        },
        {
          "key": "PRODUCT_SERVICE_TOKEN",
          "value": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJwcm9kdWN0Iiwic3ViIjoiY3VzdG9tZXIiLCJ0eXBlIjoic2VydmljZSIsImlhdCI6MTU5MjUxMDc0N30.fCEOGqn5LTWH_-sXlUWQkGkkzUa67welgWOJ0D_P5QE"
        },
        {
          "key": "CORE_SERVICE_ENDPOINT",
          "value": "http://core-service-244174806.us-east-1.elb.amazonaws.com"
        },
        {
          "key": "CORE_SERVICE_TOKEN",
          "value": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJjb3JlLXNlcnZpY2UiLCJzdWIiOiJodWItcm91dGVyIiwidHlwZSI6InNlcnZpY2UiLCJpYXQiOjE1NjcxNjc1MzZ9.EqDHF12U3_1gBr28H0sJXmhNMx9td-F1-8FVJwMqX8Q"
        },
        {
          "key": "DB_DATABASE",
          "value": "hubii"
        },
        {
          "key": "DB_USERNAME",
          "value": "hubii"
        },
        {
          "key": "APP_DEBUG",
          "value": "true"
        },
        {
          "key": "DB_CONNECTION",
          "value": "pgsql"
        },
        {
          "key": "DB_SCHEMA",
          "value": "hubii_staging"
        }

      ],
      "secrets": {
        "DB_PASSWORD": "arn:aws:ssm:us-east-1:209539466991:parameter/test-env-id/db_password",
        "JWT_SECRET": "arn:aws:ssm:us-east-1:209539466991:parameter/test-env-id/hub-service/jwt_secret"
      }
    },
    {
      "name": "product-service-app",
      "target": "diggerhq/target-ecs-module@dev-hubii",
      "type": "container",
      "health_check": "/",
      "load_balancer": true,
      "internal": "false",
      "container_port": 8080,
      "health_check_matcher": "200-499",
      "launch_type": "FARGATE",
      "aws_app_identifier": "product-service",
      "monitoring_enabled": true,
      "lb_monitoring_enabled": true,
      "environment_variables": [
        {
          "key": "DB_HOST",
          "value": "hubii-db.ctx0gix1bhgt.us-east-1.rds.amazonaws.com"
        },
        {
          "key": "DB_DATABASE",
          "value": "hubii"
        },
        {
          "key": "DB_USERNAME",
          "value": "hubii"
        },
        {
          "key": "APP_DEBUG",
          "value": "true"
        },
        {
          "key": "DB_CONNECTION",
          "value": "pgsql"
        },
        {
          "key": "DB_SCHEMA",
          "value": "hubii_staging"
        }

      ],
      "secrets": {
        "DB_PASSWORD": "arn:aws:ssm:us-east-1:209539466991:parameter/test-env-id/db_password",
        "JWT_SECRET": "arn:aws:ssm:us-east-1:209539466991:parameter/test-env-id/product-service/jwt_secret"
      }
    },
    {
      "name": "store-router-app",
      "target": "diggerhq/target-ecs-module@dev-hubii",
      "type": "container",
      "health_check": "/",
      "load_balancer": true,
      "internal": "false",
      "container_port": 8080,
      "health_check_matcher": "200-499",
      "launch_type": "FARGATE",
      "aws_app_identifier": "store-router",
      "monitoring_enabled": true,
      "lb_monitoring_enabled": true,
      "environment_variables": [
        {
          "key": "DB_HOST",
          "value": "hubii-db.ctx0gix1bhgt.us-east-1.rds.amazonaws.com"
        },
        {
          "key": "DB_DATABASE",
          "value": "hubii"
        },
        {
          "key": "DB_USERNAME",
          "value": "hubii"
        },
        {
          "key": "APP_DEBUG",
          "value": "true"
        },
        {
          "key": "DB_CONNECTION",
          "value": "pgsql"
        },
        {
          "key": "DB_SCHEMA",
          "value": "hubii_staging"
        },
        {
          "key": "PRODUCT_SERVICE_ENDPOINT",
          "value": "http://product-service-2098129721.us-east-1.elb.amazonaws.com"
        },
        {
          "key": "PRODUCT_SERVICE_TOKEN",
          "value": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJwcm9kdWN0Iiwic3ViIjoic3RvcmVfZnJvbnQiLCJ0eXBlIjoic2VydmljZSIsImlhdCI6MTU5MjUxMDc0N30.SGIjm7TP0vUdQH7-RKnbP11HKFd_A9a6Mr-i9L6kFeM"
        },
        {
          "key": "ORDER_SERVICE_ENDPOINT",
          "value": "http://order-service-606590112.us-east-1.elb.amazonaws.com"
        },
        {
          "key": "ORDER_SERVICE_TOKEN",
          "value": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJvcmRlciIsInN1YiI6InN0b3JlX2Zyb250IiwidHlwZSI6InNlcnZpY2UiLCJpYXQiOjE1OTI1MTA3NDd9.H44xEIE4ApBR4FEHY7KTM0E6hzfzJppTRSPFkBkK1eI"
        },
        {
          "key": "CORE_SERVICE_ENDPOINT",
          "value": "http://core-service-244174806.us-east-1.elb.amazonaws.com"
        },
        {
          "key": "CORE_SERVICE_TOKEN",
          "value": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJjb3JlIiwic3ViIjoic3RvcmVfZnJvbnQiLCJ0eXBlIjoic2VydmljZSIsImlhdCI6MTU5MjUxMDc0N30._uzSrfHg_OWIBicy-iNLISwlIP1Wz01uH36o_yiTFLc"
        }
      ],
      "secrets": {
        "DB_PASSWORD": "arn:aws:ssm:us-east-1:209539466991:parameter/test-env-id/db_password",
        "JWT_SECRET": "arn:aws:ssm:us-east-1:209539466991:parameter/test-env-id/order-service/jwt_secret"
      }
    },
    {
      "id": "db_id_hubii",
      "rds_engine": "postgres",
      "rds_engine_version": "14.0",
      "database_name": "hubii",
      "database_username": "hubii",
      "rds_instance_class": "db.t3.micro",
      "connection_schema": "postgres",
      "date_created": "2022-11-17T11:53:22-0600",
      "name": "hubii-db",
      "target": "diggerhq/target-resource-module@main",
      "type": "resource",
      "aws_app_identifier": "hubii-db",
      "resource_type": "database"
    }
  ]
}
